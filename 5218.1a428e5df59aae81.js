"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5218],{5218:(N,c,n)=>{n.r(c),n.d(c,{TimePageModule:()=>D});var u=n(177),h=n(9417),g=n(4742),f=n(8986),s=n(1097);class d{constructor(r,o,e){this.name=r,this.value=o,this.itemStyle=e}}const y={name:"startOfDay",from:{hour:0,minute:0},to:{hour:0,minute:0},category:s.s.MARKER},T={name:"endOfDay",from:{hour:23,minute:59},to:{hour:23,minute:59},category:s.s.MARKER},E={MARKER:"black",PRAYER:"green",NONE:"yellow",PERSONAL:"blue",WORK:"red",HOME:"orange"};var i=n(3953),P=n(7468),R=n(6354);let M=(()=>{var t;class r{constructor(e){this.serviceList=e}getAllTimeEvents(){return(0,P.p)(this.serviceList.filter(e=>e.isEnabled()).map(e=>e.getEventList())).pipe((0,R.T)(e=>e.reduce((a,m)=>a.concat(m)).sort((a,m)=>a.from.hour==m.from.hour?a.from.minute-m.from.minute:a.from.hour-m.from.hour)))}}return(t=r).\u0275fac=function(e){return new(e||t)(i.KVO("TimeEventSource[]"))},t.\u0275prov=i.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),r})();var l=n(7892);function A(t,r){if(1&t&&i.nrm(0,"div",1),2&t){const o=i.XpG();i.Y8G("options",o.options)}}const O=[{path:"",component:(()=>{var t;class r{constructor(e){this.timeEventAggregationService=e,this.dataReady=!1}ngOnInit(){this.timeEventAggregationService.getAllTimeEvents().subscribe(e=>{console.log(e),this.options=function p(t){return{title:{text:"A Case of Doughnut Chart",left:"center",top:"center"},series:[{type:"pie",data:t,radius:["50%","70%"]}]}}(function v(t){if(0==t.length)return[];t=[y,...t,T];const r=[];return 60*t[0].from.hour+t[0].from.minute>1&&r.push({from:0,to:60*t[0].from.hour+t[0].from.minute-1,isEmpty:!0,name:"empty slot",category:s.s.NONE}),t.forEach((o,e)=>{let a=60*o.from.hour+o.from.minute,m=60*o.to.hour+o.to.minute;e>0&&a-r[e-1].to>1&&r.push({from:r[e-1].to+1,to:a-1,isEmpty:!0,name:"empty slot",category:s.s.NONE}),r.push({from:a,to:m,isEmpty:!1,name:o.name,category:o.category})}),r.map(o=>new d(o.name,o.to-o.from,{color:E[o.category]}))}(e)),this.dataReady=!0})}}return(t=r).\u0275fac=function(e){return new(e||t)(i.rXU(M))},t.\u0275cmp=i.VBU({type:t,selectors:[["app-time"]],decls:2,vars:1,consts:[["class","demo-chart","echarts","",3,"options",4,"ngIf"],["echarts","",1,"demo-chart",3,"options"]],template:function(e,a){1&e&&(i.j41(0,"ion-content"),i.DNE(1,A,1,1,"div",0),i.k0s()),2&e&&(i.R7$(),i.Y8G("ngIf",a.dataReady))},dependencies:[u.bT,g.W9,l.$P]}),r})()}];let C=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.$C({type:t}),t.\u0275inj=i.G2t({imports:[f.iI.forChild(O),f.iI]}),r})(),D=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.$C({type:t}),t.\u0275inj=i.G2t({imports:[u.MD,h.YN,g.bv,l.sN.forChild(),C]}),r})()}}]);